# AI Karen â€“ Backend .env example

# --- Core server settings ---
# Optional: override backend base URL used by the Next.js proxy
# KAREN_BACKEND_URL=http://127.0.0.1:8000

# --- Authentication / dev flags ---
# Enable a development-only login bypass when the DB is not ready.
# If enabled, /api/auth/login will fall back to issuing a dev token on failure,
# and /api/auth/dev-login will be available. DO NOT USE IN PRODUCTION.
AUTH_DEV_MODE=false
AUTH_ALLOW_DEV_LOGIN=false

# Object storage (MinIO) for Milvus
# Default local credentials. Change for real deployments.
MINIO_ACCESS_KEY=ai-karen-minio
MINIO_SECRET_KEY=ai-karen-minio-secret
MINIO_ROOT_USER=${MINIO_ACCESS_KEY}
MINIO_ROOT_PASSWORD=${MINIO_SECRET_KEY}

# JWT secret used for access/refresh tokens.
# Change this in production.
AUTH_SECRET_KEY=change-me-in-production

# --- Database (PostgreSQL via asyncpg) ---
# Primary connection string. If you use a non-async driver (postgresql://),
# the backend will auto-upgrade it to asyncpg at runtime.
AUTH_DATABASE_URL=postgresql+asyncpg://karen_user:karen_secure_pass_change_me@localhost:5432/ai_karen

# Optional legacy keys (either can be used instead of AUTH_DATABASE_URL)
# POSTGRES_URL=postgresql+asyncpg://user:pass@localhost:5432/ai_karen
# DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/ai_karen

# SQLAlchemy async engine tuning
AUTH_DB_POOL_SIZE=10
AUTH_DB_POOL_MAX_OVERFLOW=20
AUTH_DB_CONNECTION_TIMEOUT=30
AUTH_DB_QUERY_TIMEOUT=30
AUTH_DB_ENABLE_QUERY_LOGGING=false

# --- Session / Cookie settings ---
# In local dev over http, set cookie_secure=false to allow cookies.
AUTH_SESSION_COOKIE_SECURE=false
AUTH_SESSION_COOKIE_HTTPONLY=true
AUTH_SESSION_COOKIE_SAMESITE=lax
AUTH_SESSION_TIMEOUT_HOURS=24

# --- Security toggles (keep conservative in dev) ---
AUTH_ENABLE_SECURITY_FEATURES=false
AUTH_ENABLE_RATE_LIMITING=false
AUTH_ENABLE_SESSION_VALIDATION=false
AUTH_ENABLE_INTELLIGENT_AUTH=false

# --- Providers / model directories ---
# Local model discovery paths
LLAMA_CPP_MODELS_DIR=./models/gguf
TRANSFORMERS_MODELS_DIR=./models/transformers

# Optional spaCy pipelines exposed via /api/public/providers/local/spacy/pipelines
# Example: en_core_web_sm,en_core_web_md
SPACY_PIPELINES=en_core_web_sm

# Cloud API keys (optional)
# OPENAI_API_KEY=
# GEMINI_API_KEY=
# HUGGINGFACE_API_KEY=
